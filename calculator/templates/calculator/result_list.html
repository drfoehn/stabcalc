{% extends "base.html" %}
{% load i18n %}
{% load static %}

{% block title %}Insert Results to {{ setting.name }}{% endblock %}

{% block content %}

    <script type = "text/javascript">
            function alert10() {
               alert ("Please insert at least 10 results for a statistical evaluation");
            }
      </script>

    <h4 class="display-5">Results from: "{{ setting.name }} / Storage duration: {{ duration.duration_number }} {{ duration.get_duration_unit_display }}"</h4>
    <h4 class="display6"
    {% if setting.result_set.count < 10 %}
           onclick="alert10()"><a href="
    {% else %}
       ><a href="{% url 'results' setting.id %}
        {% endif %}
    ">Show statistical evaluation</a></h4>
    Parameter: {{ setting.parameter.name }}<br>
    Temperature: {{ setting.condition.get_temperature_display }}<br>
    <br>

    <div class="row">


<div class="col-3">
<h5 class="display-7">Selected storage durations:</h5>
    <ul  class="nav flex-column justify-content-center">
        {% for duration in durations %}
            <li  class="nav-item"><a href="{% url 'create-result' setting.id duration.id %}">{{ duration }}</a></li>
        {% endfor %}
    </ul>
    <br>
    <i><a href="{% url 'create-duration' %}">Add additional storage durations</a></i>
</div>

    <div class="col-7">
    <br>
                  <a hx-get="{% url 'create-result-form' setting.id duration.id %}" class="btn btn-danger btn-add"
                                   role="button" data-bs-toggle="button" id="addresults-button"
                                   hx-swap="beforebegin">Add additional result rows per subject/sample</a>
 <form action="" method="post">
 {% csrf_token %}
                    {% for subject in setting.subject.all %}
                        <div class="row">
                            <div class="col-2">
                                <h4 class="display6">{{ subject }} </h4> <br>
                            </div>
                            <div class="col-3">


                                <div class="row" id="result_form-{{ duration.id }}-{{ subject.id }}"></div>


                                {##}
                                                                {% include 'calculator/partials/result_form.html' %}
                                {##}
{#                                <button type="submit" class="btn btn-secondary">Save</button>#}
{#                            </form>#}
                                {% for result in subject.result_set.all %}
                                    {% if result.setting == setting %}
                                        {% if result.duration == duration %}
                                            {% if result %}
                                                {% include 'calculator/partials/result_detail.html' %}
                                            {% endif %}
                                        {% endif %}
                                    {% endif %}
                                {% endfor %}

                            </div>
                        </div>
                        <hr>
 {% endfor %}

  <button type="submit" class="btn btn-danger">Save</button>
  </form>
</div>



        </div>
    </div>


{% endblock %}


